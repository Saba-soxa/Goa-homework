<!DOCTYPE html>
<html lang="ka">
<head>
  <meta charset="UTF-8">
  <title>Level 95 დავალებები</title>
</head>
<body>
  <h1>Level 95</h1>

  <!-- დავალება 2: მარტივი ფორმა -->
  <form id="nameForm">
    <input type="text" id="nameInput" placeholder="შეიყვანე სახელი">
    <button type="submit">გაგზავნა</button>
  </form>

 
  <div id="apiData"></div>
  <button id="loadBtn">მონაცემების წამოღება</button>

  <ul id="listData"></ul>

  <script>
    // დავალება 1
    console.log("ლომიიიიი");

    fetch("https://jsonplaceholder.typicode.com/posts/1") // API (მაგალითი)
      .then(res => res.json())
      .then(data => {
        console.log("API-დან წამოღებული:", data);
      })
      .catch(err => console.log("შეცდომა:", err))
      .finally(() => {
        console.log("დავამთავრე დათოვ");
      });

    // დავალება 2
    const form = document.getElementById("nameForm");
    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const value = document.getElementById("nameInput").value;
      console.log("შეყვანილი სახელი:", value);
    });

    // დავალება 3
    fetch("https://jsonplaceholder.typicode.com/users")
      .then(res => res.json())
      .then(users => {
        const div = document.getElementById("apiData");
        div.innerHTML = "<h2>მომხმარებლები API-დან</h2>";
        users.slice(0, 5).forEach(user => {
          div.innerHTML += `<p>${user.name} (${user.email})</p>`;
        });
      });

    // დავალება 4
    function asyncPromiseFunction(text) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          if (!text) {
            reject("შეცდომაა ლომო");
          } else {
            resolve("შესრულდა წარმატებით: " + text);
          }
        }, 1000);
      });
    }

    asyncPromiseFunction("work 2")
      .then(msg => console.log(msg))
      .catch(err => console.log(err));

    asyncPromiseFunction("")
      .then(msg => console.log(msg))
      .catch(err => console.log(err));

    // დავალება 5
    const btn = document.getElementById("loadBtn");
    btn.addEventListener("click", () => {
      fetch("https://jsonplaceholder.typicode.com/posts")
        .then(res => res.json())
        .then(posts => {
          const ul = document.getElementById("listData");
          ul.innerHTML = "";
          posts.slice(0, 5).forEach(post => {
            const li = document.createElement("li");
            li.textContent = post.title;
            ul.appendChild(li);
          });
          console.log("მონაცემები დაემატა");
        });
    });
  </script>
</body>
</html>
